<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Russisch Speed-Drill: В oder НА?</title>
    <style>
        :root {
            --color-v: #2196F3;   /* Blau */
            --color-na: #FF9800;  /* Orange */
            --bg-color: #f0f2f5;
            --card-bg: #ffffff;
            --text-color: #333;
            --success: #4CAF50;
            --error: #F44336;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .game-container {
            background-color: var(--card-bg);
            width: 100%;
            max-width: 600px;
            border-radius: 15px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        h1 { margin-top: 0; color: #444; }

        /* Screens */
        .screen { display: none; }
        .screen.active { display: block; animation: fadeIn 0.3s ease; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Start Screen */
        .intro-text { font-size: 1.1rem; color: #666; margin-bottom: 30px; }
        
        .btn-start {
            background-color: var(--success);
            color: white;
            font-size: 1.5rem;
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            transition: transform 0.1s;
        }
        .btn-start:active { transform: scale(0.95); }

        /* Game Screen */
        .stats-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-weight: bold;
            color: #888;
            font-size: 0.9rem;
        }

        .progress-bar-bg {
            height: 6px;
            background-color: #eee;
            border-radius: 3px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background-color: var(--color-v);
            width: 0%;
            transition: width 0.3s ease;
        }

        .word-display {
            font-size: 3.5rem;
            font-weight: bold;
            margin: 20px 0 10px 0;
            color: #333;
        }

        .translation-display {
            font-size: 1.2rem;
            color: #888;
            margin-bottom: 40px;
            font-style: italic;
        }

        .choice-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .btn-choice {
            border: none;
            border-radius: 12px;
            padding: 20px 0;
            font-size: 2.5rem;
            font-weight: bold;
            color: white;
            cursor: pointer;
            transition: transform 0.1s, opacity 0.2s;
            box-shadow: 0 4px 0 rgba(0,0,0,0.1);
        }

        .btn-choice:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        .btn-v { background-color: var(--color-v); }
        .btn-na { background-color: var(--color-na); }

        /* Reset Button Style */
        .btn-game-reset {
            background: none;
            border: 2px solid #ccc;
            color: #777;
            padding: 8px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
        }
        .btn-game-reset:hover {
            border-color: #999;
            color: #333;
            background-color: #f9f9f9;
        }

        /* Feedback Animationen */
        .btn-choice.correct-anim {
            background-color: var(--success) !important;
            animation: pulse 0.3s;
        }

        .btn-choice.wrong-anim {
            background-color: var(--error) !important;
            animation: shake 0.4s;
        }

        /* Result Screen */
        .score-display {
            font-size: 4rem;
            font-weight: bold;
            color: var(--success);
            margin: 20px 0;
        }

        .feedback-msg { font-size: 1.2rem; margin-bottom: 30px; }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @media (max-width: 450px) {
            .word-display { font-size: 2.5rem; }
            .btn-choice { font-size: 2rem; padding: 15px 0; }
            .game-container { padding: 20px; }
        }
    </style>
</head>
<body>

<div class="game-container">
    
    <!-- START SCREEN -->
    <div id="start-screen" class="screen active">
        <h1>В oder НА?</h1>
        <p class="intro-text">Schnell-Training<br>20 Wörter.<br>Reagieren Sie so schnell wie möglich!</p>
        <button class="btn-start" onclick="startGame()">Starten ▶</button>
    </div>

    <!-- GAME SCREEN -->
    <div id="game-screen" class="screen">
        <div class="stats-bar">
            <span id="score-counter">Punkte: 0</span>
            <span id="progress-counter">1 / 20</span>
        </div>
        <div class="progress-bar-bg">
            <div id="progress-fill" class="progress-bar-fill"></div>
        </div>

        <div class="word-card">
            <div id="word-rus" class="word-display">...</div>
            <div id="word-de" class="translation-display">...</div>
        </div>

        <div class="choice-buttons">
            <button id="btn-v" class="btn-choice btn-v" onclick="handleInput('в')">В</button>
            <button id="btn-na" class="btn-choice btn-na" onclick="handleInput('на')">НА</button>
        </div>

        <!-- NEU: ZURÜCKSETZEN BUTTON -->
        <button class="btn-game-reset" onclick="resetGame()">Zurücksetzen ↺</button>
    </div>

    <!-- RESULT SCREEN -->
    <div id="result-screen" class="screen">
        <h1>Fertig!</h1>
        <div class="score-display" id="final-score">0</div>
        <p class="feedback-msg" id="final-msg">Gut gemacht!</p>
        <button class="btn-start" style="font-size: 1.2rem; padding: 12px 30px;" onclick="startGame()">Nochmal spielen ↺</button>
    </div>

</div>

<script>
    const database = [
        { rus: "школа", de: "Schule", prep: "в" },
        { rus: "парк", de: "Park", prep: "в" },
        { rus: "работа", de: "Arbeit", prep: "на" },
        { rus: "почта", de: "Post", prep: "на" },
        { rus: "музей", de: "Museum", prep: "в" },
        { rus: "стадион", de: "Stadion", prep: "на" },
        { rus: "магазин", de: "Geschäft", prep: "в" },
        { rus: "завод", de: "Fabrik/Werk", prep: "на" },
        { rus: "вокзал", de: "Bahnhof", prep: "на" },
        { rus: "театр", de: "Theater", prep: "в" },
        { rus: "концерт", de: "Konzert", prep: "на" },
        { rus: "улица", de: "Straße", prep: "на" },
        { rus: "Россия", de: "Russland", prep: "в" },
        { rus: "лес", de: "Wald", prep: "в" },
        { rus: "выставка", de: "Ausstellung", prep: "на" },
        { rus: "библиотека", de: "Bibliothek", prep: "в" },
        { rus: "площадь", de: "Platz", prep: "на" },
        { rus: "ресторан", de: "Restaurant", prep: "в" },
        { rus: "рынок", de: "Markt", prep: "на" },
        { rus: "кино", de: "Kino", prep: "в" }
    ];

    let currentQuestions = [];
    let currentIndex = 0;
    let score = 0;
    let isInputLocked = false;
    let nextQuestionTimeout = null; // Speichert den Timer, um ihn bei Reset zu stoppen

    const startScreen = document.getElementById('start-screen');
    const gameScreen = document.getElementById('game-screen');
    const resultScreen = document.getElementById('result-screen');
    
    const wordRusEl = document.getElementById('word-rus');
    const wordDeEl = document.getElementById('word-de');
    const scoreEl = document.getElementById('score-counter');
    const progressEl = document.getElementById('progress-counter');
    const progressFill = document.getElementById('progress-fill');
    
    const btnV = document.getElementById('btn-v');
    const btnNa = document.getElementById('btn-na');

    function startGame() {
        score = 0;
        currentIndex = 0;
        isInputLocked = false;
        
        // Mischen
        currentQuestions = [...database].sort(() => 0.5 - Math.random());
        
        updateStats();
        
        startScreen.classList.remove('active');
        resultScreen.classList.remove('active');
        gameScreen.classList.add('active');

        showQuestion();
    }

    // NEU: Funktion zum Zurücksetzen
    function resetGame() {
        // Stoppt den Timer, falls eine Antwort gerade gegeben wurde
        if (nextQuestionTimeout) {
            clearTimeout(nextQuestionTimeout);
        }
        
        // Buttons aufräumen (falls sie noch Farben haben)
        btnV.classList.remove('correct-anim', 'wrong-anim');
        btnNa.classList.remove('correct-anim', 'wrong-anim');
        
        // Screens wechseln
        gameScreen.classList.remove('active');
        startScreen.classList.add('active');
    }

    function showQuestion() {
        const currentQ = currentQuestions[currentIndex];
        
        wordRusEl.style.opacity = 0;
        wordDeEl.style.opacity = 0;
        
        setTimeout(() => {
            wordRusEl.textContent = currentQ.rus;
            wordDeEl.textContent = currentQ.de;
            wordRusEl.style.opacity = 1;
            wordDeEl.style.opacity = 1;
            
            isInputLocked = false;
            // Klassen resetten, falls noch Animation lief
            btnV.className = 'btn-choice btn-v';
            btnNa.className = 'btn-choice btn-na';
        }, 100);
    }

    function handleInput(userChoice) {
        if (isInputLocked) return;
        isInputLocked = true;

        const currentQ = currentQuestions[currentIndex];
        const isCorrect = (userChoice === currentQ.prep);

        const clickedBtn = userChoice === 'в' ? btnV : btnNa;

        if (isCorrect) {
            score++;
            clickedBtn.classList.add('correct-anim');
        } else {
            clickedBtn.classList.add('wrong-anim');
        }

        updateStats();

        // Timer speichern, damit wir ihn bei Reset stoppen können
        nextQuestionTimeout = setTimeout(() => {
            nextQuestion();
        }, 600);
    }

    function nextQuestion() {
        currentIndex++;
        
        if (currentIndex < currentQuestions.length) {
            showQuestion();
        } else {
            endGame();
        }
    }

    function updateStats() {
        scoreEl.textContent = `Punkte: ${score}`;
        progressEl.textContent = `${Math.min(currentIndex + 1, currentQuestions.length)} / ${currentQuestions.length}`;
        const pct = ((currentIndex) / currentQuestions.length) * 100;
        progressFill.style.width = `${pct}%`;
    }

    function endGame() {
        gameScreen.classList.remove('active');
        resultScreen.classList.add('active');
        
        const finalScoreEl = document.getElementById('final-score');
        const finalMsg = document.getElementById('final-msg');
        
        finalScoreEl.textContent = `${score} / ${currentQuestions.length}`;

        const percentage = (score / currentQuestions.length);
        if (percentage === 1) {
            finalMsg.textContent = "Perfekt! Du bist ein Profi!";
            finalMsg.style.color = "var(--success)";
        } else if (percentage > 0.8) {
            finalMsg.textContent = "Sehr gut gemacht!";
            finalMsg.style.color = "var(--color-v)";
        } else if (percentage > 0.5) {
            finalMsg.textContent = "Gut, aber übe noch ein bisschen.";
            finalMsg.style.color = "var(--color-na)";
        } else {
            finalMsg.textContent = "Versuche es noch einmal.";
            finalMsg.style.color = "var(--error)";
        }
    }
</script>

</body>
</html>